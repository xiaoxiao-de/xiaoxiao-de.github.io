---
title: 小程序
date: 2022/06/12 21:44:15
tags: [小程序]
categories: 技术
cover: static\img\photo-1571361656693-d7602246ce3c.jpg
---
### 小程序分享朋友圈功能

小程序页面默认不可被分享到朋友圈，开发者需主动设置“分享到朋友圈”。页面允许被分享到朋友圈，需满足两个条件：

1. 首先，页面需设置允许“发送给朋友”。具体参考 [`Page.onShareAppMessage`](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareAppMessage-Object-object) 接口文档
2. 满足条件 1 后，页面需设置允许“分享到朋友圈”，同时可自定义标题、分享图等。具体参考 [`Page.onShareTimeline`](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareTimeline) 接口文档

**showShareMenu**

支持**快速分享到朋友圈**使用默认小程序标题，分享图为小程序logo，不可自定义参数

```
uni.showShareMenu({
  menus: ['shareAppMessage', 'shareTimeline'] //shareAppMessage必须得有
})
```

**onShareTimeline**

支持**自定义分享到朋友圈**的小程序标题、分享图，自定义query参数

```
//注意必须得设置允许“发送给朋友”onShareAppMessage，是设置onShareTimeline的前提，否则不支持分享到朋友圈
onShareAppMessage: () => {
},
onShareTimeline: () => {
  return {
    title: "测试小程序朋友圈分享",
    query: "id=110101&name=heyzqt",
    imageUrl: "https://example.cn/test.png"
  }
},
```

